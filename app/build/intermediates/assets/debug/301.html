<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type  content="text/html; charset=gb2312" ><title>2.打地鼠的实现</title><!--[if gte mso 9]><xml><w:WordDocument><w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel><w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery><w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery><w:DocumentKind>DocumentNotSpecified</w:DocumentKind><w:DrawingGridVerticalSpacing>7.8</w:DrawingGridVerticalSpacing><w:View>Web</w:View><w:Compatibility><w:DontGrowAutofit/></w:Compatibility><w:Zoom>0</w:Zoom></w:WordDocument></xml><![endif]--><!--[if gte mso 9]><xml><w:LatentStyles DefLockedState="false"  DefUnhideWhenUsed="true"  DefSemiHidden="true"  DefQFormat="false"  DefPriority="99"  LatentStyleCount="156" ><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Normal" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 1" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 6" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 7" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 8" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="heading 9" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 1" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 6" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 7" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 8" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index 9" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 1" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 6" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 7" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 8" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toc 9" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Normal Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="footnote text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="annotation text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="header" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="footer" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="index heading" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="caption" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="table of figures" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="envelope address" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="envelope return" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="footnote reference" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="annotation reference" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="line number" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="page number" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="endnote reference" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="endnote text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="table of authorities" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="macro" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="toa heading" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Bullet" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Number" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Bullet 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Bullet 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Bullet 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Bullet 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Number 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Number 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Number 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Number 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Title" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Closing" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Signature" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  UnhideWhenUsed="false"  Name="Default Paragraph Font" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Continue" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Continue 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Continue 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Continue 4" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="List Continue 5" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Message Header" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Subtitle" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Salutation" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Date" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text First Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text First Indent 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Note Heading" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text Indent 2" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Body Text Indent 3" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Block Text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Hyperlink" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="FollowedHyperlink" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Strong" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Emphasis" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Document Map" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Plain Text" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="E-mail Signature" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Normal (Web)" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Acronym" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Address" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Cite" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Code" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Definition" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Keyboard" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Preformatted" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Sample" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Typewriter" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="HTML Variable" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Normal Table" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="annotation subject" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="No List" ></w:LsdException><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Balloon Text" ></w:LsdException></w:LatentStyles></xml><![endif]--><style>
@font-face{
font-family:"Times New Roman";
}

@font-face{
font-family:"宋体";
}

@font-face{
font-family:"微软雅黑";
}

@font-face{
font-family:"Tahoma";
}

@font-face{
font-family:"Symbol";
}

@font-face{
font-family:"Arial";
}

@font-face{
font-family:"黑体";
}

@font-face{
font-family:"Courier New";
}

@font-face{
font-family:"Wingdings";
}

@list l0:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l1:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l2:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l3:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l4:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l5:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l6:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l7:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l8:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l9:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

p.p0{
margin:0pt;
margin-bottom:0.0001pt;
margin-bottom:0pt;
margin-top:0pt;
font-family:'Times New Roman'; }
@page{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}@page Section0{
margin-top:72.0000pt;
margin-bottom:72.0000pt;
margin-left:90.0000pt;
margin-right:90.0000pt;
size:595.3000pt 841.9000pt;
layout-grid:15.6000pt;
}
div.Section0{page:Section0;}</style></head><body style="tab-interval:36pt; text-justify-trim:punctuation; " ><!--StartFragment--><div class="Section0"  style="layout-grid:15.6000pt;
" ><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:center; " ><span style="mso-spacerun:'yes'; font-size:26.0000pt; font-family:'宋体'; " >2.打地鼠的实现</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　打地鼠的实现思路也非常的简单，在地鼠进洞前判断是否点击到了地鼠，点到了就加分，否则就损失一条生命，由于地鼠是动态进行的，所以用SurfaceView实现比较合适，地鼠的运动通过改变地鼠的y坐标就可以了，以前刚开始提取别人的素材发现地鼠图片是一帧一帧的，也受限于别人的思路。用系统控件ImageView也可以实现。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　首先在游戏中有开始，暂停，继续，返回按钮，我们先进行完成一个按钮类，x，y代表按钮的位置，w，h代表按钮的宽，高，然后定义一个draw方法绘制按钮，如果需要按下效果，点击状态下绘制一张图片，抬起状态下绘制另一张图片。</span><span><img width="480"  height="800"  src="301.files/301-350.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　然后再定义一个isClick方法，判断动作是0为点击，贴吧教程里面有，然后获取点击的坐标是否在按钮范围，如果是就返回真，否则返回假，这样我们的按钮类就完成了。</span><span><img width="480"  height="800"  src="301.files/301-506.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　然后写上SurfaceView，不用介绍吧。</span><span><img width="480"  height="800"  src="301.files/301-605.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >在Activity中全屏，显示自定义视图。</span><span><img width="480"  height="800"  src="301.files/301-702.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　素材准备，准备一张背景图，起到刷屏作用，然后准备一张洞口图片。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >这张作为地鼠洞口的图片，由于分辨率只有60*60，所以在res目录下新建一个drawable-ldpi目录，把图片放进里面，以保证在各分辨率的适应性，贴吧教程也有说过，低分辨率的文件夹。命名为empty。</span><span><img width="60"  height="60"  src="301.files/301-914.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >背景图，可以放进mdpi目录里面去，命名为bg。</span><span><img width="480"  height="720"  src="301.files/301-1014.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来定义一个背景类用于绘制背景，实例化刚刚那两张图片，w,h分别代表地鼠洞的宽高，然后定义一个draw方法绘制，首先绘制一张背景图进行刷屏，然后两层for循环将地鼠洞绘制16个。</span><span><img width="480"  height="800"  src="301.files/301-1182.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'Times New Roman'; " >其实这里的<font face="Times New Roman" >for</font></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >循环不需要两层，只需要一层</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'Times New Roman'; " >for</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >循环就可以了，</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'Times New Roman'; " >i=0;i&#60;16</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >。不过这样比较直白一点。继续打开SurfaceView主视图，先把框架写上，定义一个init方法方便初始游戏，定义一个draw方法进行绘制，定义一个logic方法处理逻辑，然后实现Runnable接口，重写run方法，声明一个flag的布尔型用来控制线程，画布，控制器，在构造函数绑定视图监听器。</span><span><img width="480"  height="800"  src="301.files/301-1447.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来划分游戏状态，有4种状态，菜单状态，游戏中，游戏暂停，游戏结束，state代表状态的标识。</span><span><img width="480"  height="800"  src="301.files/301-1573.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来在视图创建的时候如果为菜单状态就初始游戏，线程标识为真，启动线程，然后视图销毁的时候把线程标识改为假，如果游戏正在进行状态，就把状态调成暂停状态，手机按房子键也会执行视图销毁函数。</span><span><img width="480"  height="800"  src="301.files/301-1744.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来在线程函数run中定义一个死循环，flag是线程循环标识，在里面不断的执行绘图函数与逻辑函数，先获取画布如果不为空就执行绘图函数，用try包裹防止出现异常，最后画布不为空提交画布，执行之前先取系统时间，执行完毕以后再取一次系统时间。</span><span><img width="480"  height="800"  src="301.files/301-1942.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来计算绘图和逻辑所占用的时间，如果小于50毫秒就进行休眠，保持50毫秒一帧。</span><span><img width="480"  height="800"  src="301.files/301-2060.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　主视图的框架我们写好了，这个框架以后都可以进行重复使用，接下来我们写地鼠了。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="text-indent:32.0000pt; margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >地鼠图片，分辨率比较小，命名为t0放进ldpi目录，这里由于素材是一帧一帧的，其实一张地鼠图片也可以，改变y坐标来控制地鼠运动。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span><img width="60"  height="60"  src="301.files/301-2241.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >t1</span><span><img width="60"  height="60"  src="301.files/301-2318.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >t2</span><span><img width="60"  height="60"  src="301.files/301-2395.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >t3</span><span><img width="60"  height="60"  src="301.files/301-2472.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >t4</span><span><img width="60"  height="60"  src="301.files/301-2549.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >ｔ５</span><span><img width="60"  height="60"  src="301.files/301-2626.png" ></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >t6，</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >被打中的图片。</span><span><img width="60"  height="60"  src="301.files/301-2712.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >再新建一个地鼠类，构造函数，绘图函数，逻辑函数，触屏函数，声明一个随机类，x，y代表地鼠的坐标。</span><span><img width="480"  height="800"  src="301.files/301-2837.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　然后声明一个位图数组，代表地鼠每一帧，index代表地鼠下标，hp表示声明，score表示分数，isHint代表地鼠被打中状态，然后在构造函数中对位图实例化，构造函数还要增加一个Context的参数才可以，用来获取包名。getIdentifier方法贴吧教程也介绍过了。isIp作为地鼠是否向上的标识。</span><span><img width="480"  height="800"  src="301.files/301-3066.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　然后在地鼠绘图函数中绘制地鼠，x，y为地鼠坐标，w，h代表地鼠宽高，在地鼠的触屏函数中判断是否打中地鼠，如果打中地鼠就让打中标识为真，地鼠向上标识为假，地鼠的帧下标为被打中的图片。</span><span><img width="480"  height="800"  src="301.files/301-3234.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　接下来写地鼠的逻辑函数，写完这个程序基本上就完成了，判断帧下标如果到最大值，就让向上标识为假，如果向上表示为真，帧下标就增加，如果为假，帧下标就减少，判断帧下标小于0，如果没有打中标识为真就增加分数，重写初始地鼠坐标，如果打中标识为假就减少一条生命，如果生命数为0了就调整游戏状态为over状态。</span><span><img width="480"  height="800"  src="301.files/301-3460.png" ></span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'Times New Roman'; " >score++</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >下面那里写错了，应该是</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'Times New Roman'; " >isHint=false</span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >。这些类都完成了，放进主视图中就可以了。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　另外lockCanvas()里面可以接受一个Rect类型的参数，这样只需要获取地鼠区域的画布就可以了，可以很大程度提高性能，上面的设计每次都是获取整个画布，每次都需要重绘背景和地鼠，性能消耗会有点高。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　这篇课程还没完的，运行就是黑黑得屏幕，把类都设计完成了，下面不用多介绍了吧，在SurfaceView中进行使用就可以了，绘图函数执行绘图函数，逻辑函数里面逻辑函数，当然要分各种状态进行执行。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　这里还是把源码发上来吧，这个是以前第一次写的版本，没有暂停，地鼠逻辑也没有封装:</span><span><a href="http://jump.bdimg.com/safecheck/index?url=x+Z5mMbGPAvVIlwZePSt0B3tEqEFWbC4kYEIagYmMtZBzFm1If7AwAcI/1AcUHLqswePdhPcxTmgKlB6CqYEON+gKv2bhEcSu9PB1aLvlhoQo6kgnQQGQHOTabBS3R6YjJf+4/kemUcCwaUZRMO+lTKtnlE/lUT1mFzVRIQrTSXBFpy7HjHG31X3ZMCahZXTMDxm7iZ2BjQ=" ><span style="mso-spacerun:'yes'; color:rgb(4,73,190); text-decoration:underline ;font-size:16.0000pt; font-family:'宋体'; " >http://pan.baidu.com/share/link?shareid=2900374977&uk=2301816883</span></a></span><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >，后来改进了方案，只用一张地鼠图片实现动画。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:16.0000pt; font-family:'宋体'; " >　　另外要想等级提升地鼠数量增多的话生成一个地鼠数组就可以了，好久以前就发过了，打你妹1.3版。</span><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; word-break:break-all; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; text-align:left; " ><span style="mso-spacerun:'yes'; font-size:10.5000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p></div><!--EndFragment--></body></html>